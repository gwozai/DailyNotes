services:
  server:
    build: .
    ports:
      - 8000:8000
    volumes:
      - ./dailynotes-volume:/app/config
    environment:
      API_SECRET_KEY: CHANGE_THIS_WITH_SECURE_PASSWORD
      DB_ENCRYPTION_KEY: CHANGE_THIS_WITH_SECURE_PASSWORD
      # Optional: SMTP settings for password reset & magic link sign-in
      # SMTP_HOST: smtp.example.com
      # SMTP_PORT: 587
      # SMTP_USER: your-smtp-username
      # SMTP_PASSWORD: your-smtp-password
      # SMTP_USE_TLS: "true"
      # SMTP_FROM_EMAIL: noreply@example.com
      # SMTP_FROM_NAME: DailyNotes
      # APP_URL: https://your-domain.com
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8000/health"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 60s
